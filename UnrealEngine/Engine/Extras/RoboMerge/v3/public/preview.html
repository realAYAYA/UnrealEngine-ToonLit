<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
	<title>ROBOMERGE branchmap preview</title>
	<link rel="icon" href="/img/robo-r.png" type="image/png">

	<script src="/js/jquery-3.4.1.min.js"></script>
	<script src="/js/bootstrap.bundle.min.js"></script>
	<script src="/js/hpcc-wasm-index.min.js"></script>
	<script src="/js/flow.js"></script>
	<script src="/js/preview.js"></script>

	<link rel="stylesheet" href="/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/main.css">

	<script>
		$(() => {
			doPreview('{{ &query }}');
		});

	</script>
</head>
<body>
	<header><img src="/img/logo.png"></header>
	<div class="container">

		<div id="error-panel" style="display:none;"> <!-- show or hide in script -->
			<div class="alert alert-warning" role="alert">
Errors attempting to preview <span class="bots"></span> from <a href="https://p4-swarm.epicgames.net/changes/{{ cl }}" target="_blank">CL#{{ cl }}</a>
			</div>
			<pre></pre>
		</div>
		<div id="success-panel" style="display:none;">
			<div class="alert alert-success" role="alert">
Graph for <span class="bots"></span> from <a href="https://p4-swarm.epicgames.net/changes/{{ cl }}" target="_blank">CL#{{ cl }}</a>
			</div>
			<div id="graph"></div>
		</div>

		<div style="transform: scale(0.7);">
			<h4>Options</h4>
			<table class="table">
				<thead><tr><th>Setting</th><th>Effect</th></tr></thead>
				<tbody>
					<tr><td><tt>hideDisconnected</tt></td><td>Hide nodes with no edges</td></tr>
					<tr><td><tt>noGroups</tt></td><td>Relevant if showing multiple bots: suppress boxes grouping each bot</td></tr>
					<tr><td><tt>showOnlyForced</tt></td><td>Omit any "on demand" (dotted gray) edges</td></tr>
				</tbody>
			</table>

			<p>e.g. <tt>http://robomerge/preview/12345?noGroups&showOnlyForced</tt></p>
		</div>
	</div>
</body>
