// PB2BP: BP_FILE_NAME=ZPbGddGlobal
syntax = "proto3";
package idlepb;

import "defines.proto";
import "common.proto";

// ============================================================================

message CommonGlobalConfig {
	float ts_rpc_max_seconds = 1;  // TsRpc 超时时间
}


// ============================================================================

message CollectionGlobalConfigLevelUpEntry {
	int32 degree_limit = 1;
	int32 stage_limit = 2;
	int32 cost_item_id = 3;
	int32 cost_item_num = 4;
	int32 cost_money = 5;
}

message CollectionGlobalConfigUpgradeStarCostRequestEntry {
	int32 cost_item_num = 1;
	int32 cost_self_piece_num = 2;
	repeated int32 cost_common_piece_num = 3;
}

message CollectionGlobalConfigUpgradeStarCostEntry {
	repeated CollectionGlobalConfigUpgradeStarCostRequestEntry request = 1;
}

message CollectionGlobalConfigUpgradeStar {
	int32 cost_item_id = 1;
	repeated int32 common_piece_by_quality = 2;
	repeated CollectionGlobalConfigUpgradeStarCostEntry cost_by_quality = 3;
	repeated CollectionGlobalConfigUpgradeStarCostEntry cost_by_quality_skill = 4;
}

message CollectionGlobalConfigReset {
	int32 cost_ji_yuan = 1;
	int32 cold_time_seconds = 2;
}

message CollectionGlobalConfig {
	repeated int32 active_by_quality = 1;
	repeated CollectionGlobalConfigLevelUpEntry levelup = 2;
	CollectionGlobalConfigUpgradeStar upgrade_star = 3;
	CollectionGlobalConfigReset reset = 4;
}

// ============================================================================

message CurrencyGlobalConfigItem2Currency {
	int32 item_cfg_id = 1;
	CurrencyType currency_type = 2;
}

message CurrencyGlobalConfig {
	repeated CurrencyGlobalConfigItem2Currency item2currency = 1;
}


// ============================================================================

message PlayerGlobalConfigRoleInitAttributes {
	float hp = 1;  /** 气血 */
	float mp = 2;  /** 真元 */
	float phy_att = 3;  /** 物攻 */
	float phy_def = 4;  /** 物防 */
	float mag_att = 5;  /** 魔攻 */
	float mag_def = 6;  /** 魔防 */
	float hp_recover_percent = 7;  /** 气血回复百分比 */
	float mp_recover_percent = 8;  /** 真元回复百分比 */
	float crit_coef = 9;  /** 会心倍率 */
	float crit_block = 10;  /** 会心格挡 */	
	float mind = 11;  /** 神识 */
}

message PlayerGlobalConfigConstants {
	float init_radius = 1;  /** 初始体积半径 */
	float auto_move_stop_time = 2;
	float auto_move_walk_time = 3;
	int32 move_speed = 4;
	float attack_interval_time = 5;
	float auto_heal_trigger_ratio_hp = 6;
	float auto_heal_trigger_ratio_mp = 7;
	float player_lock_distance_hand = 8;  /** 手动锁定距离S1 */
	float player_lock_distance_auto = 9;  /** 手动锁定距离S2 */
	float player_lock_distance_max = 10;  /** 手动锁定距离S3 */
	float player_lock_distance_near = 11;  /** 近距离取消锁定 */
	float player_lock_distance_screen = 12;  /** 脱离屏幕视线取消 */
	float enter_scale_size_distance_2d = 13;  /** 2D 进入缩放物体大小的距离 */
	float player_reborn_time = 14;  /** 重生倒计时 */
	float player_reduce_time = 15;  /** 每次点击减少倒计时的时间 */
	float player_reduce_num_max = 16;  /** 减少时间次数上限 */
	float player_escape_time = 17;  /** 脱战时间 */
	float battle_status_seconds = 18;  /** 脱离激战时间（秒）-修士间战斗 */
	int32 max_explore_time = 19;  /** 最大探索时长(单位秒) */
	float player_teleport_cooldown = 20;  /** 传送CD (单位：秒) */
	int32 switch_cultivation_direction_min_rank = 21; /** 切换修炼方向的最小Rank需求 */
	float server_take_control_idle_seconds = 22;  /** 角色空闲多长时间，服务器接手角色控制权 (单位：秒) */
	float player_location_correction_distance_near = 23;  /** 角色坐标补正距离 近 */
	float player_location_correction_distance_far = 24;  /** 角色坐标补正距离 远 */
	float player_correction_cost_speed = 25;  /** 角色补正速度 */
	float mini_map_world_width = 26;  /** mini Map Width */
	float mini_map_world_height = 27;  /** mini Map Height */
	float activate_entities_distance = 28;  /** 客户端管理Entity的范围，距离主角的长度 */
	float select_box_auto_disappear_time = 29;  /** 选中框自动消失时间 (单位：秒) */
	float intervene_to_auto_seconds = 30;  /** 干预模式空闲多久，变为自动模式 (单位：秒)  */
	float set_pause_move_function_time = 31;  /** 手动变为自动模式延迟时间 (单位：秒)  */
}

// 角色神通相关全局参数配置
message PlayerGlobalConfigAbility {
	int32 open_rank = 1;  /** 神通系统开启的主修等级限制 */
	int32 open_secondary_rank = 2;  /** 开启第二神通树的修炼等级限制 */
	repeated int32 slots_unlock_rank = 3;  /** 神通槽位开放修炼等级限制 */
}

message PlayerGlobalConfigBreathingExercise {
	float speed = 1;  // 吐纳速度（单位：秒）
	float cancel_pct = 2;  // 取消阈值 (例 0.5 代表 50%)
	float high_min_pct = 3;  // 高级吐纳开始阈值
	float perfect_min_pct = 4;  // 完美吐纳开始阈值
	float perfect_max_pct = 5;  // 完美吐纳结束阈值
	int32 rate2 = 6;  // 2倍吐纳权重
	int32 rate5 = 7;  // 5倍吐纳权重
	int32 rate10 = 8;  // 10倍吐纳权重
	float basic_ling_qi = 9;  // 基础灵气
}

// 雷劫境界配置
message PlayerGlobalConfigThunderTestDegreeConfig {
	int32 degree = 1;  // 境界
	float val = 2;  // 基础伤害
}

// 雷劫配置
message PlayerGlobalConfigThunderTest {
	repeated float damage_coef = 1;  /** 雷劫系数 */
	repeated PlayerGlobalConfigThunderTestDegreeConfig damage_base = 2;  /** 基础伤害 */
}

message PlayerGlobalConfigAlchemy {
	float each_refining_seconds = 1;  /** 单次炼丹耗时（单位：秒） */
	int32 big_chance_value = 2;  /** 触发大保底阈值 */
	int32 small_chance_value = 3; /** 触发大保底阈值 */
	int32 max_daily_count = 4; /** 每日炼丹次数上限 */
}


message PlayerGlobalConfigForgeDestroyBackItemConfig {
	int32 degree = 1;
	int32 item_id = 2;
	int32 item_num = 3;
}

message PlayerGlobalConfigForge {	
	float each_refining_seconds = 1;  /** 单次炼丹耗时（单位：秒） */
	int32 big_chance_value = 2;  /** 触发大保底阈值 */
	int32 small_chance_value = 3;  /** 触发大保底阈值 */
	int32 max_daily_count = 4;  /** 每日炼器次数上限 */
	int32 max_daily_extra_materials_use_count = 5;  /** 每日使用辅材次数上限 */
	int32 revert_cost_gold = 6;  /** 装备还原的机缘单价 */
	int32 destroy_cost_gold = 7;  /** 熔炼的机缘单价 */
	repeated PlayerGlobalConfigForgeDestroyBackItemConfig destroy_get_item_num = 8;  /** 熔炉装备返还的资源数量 */
	int32 found_cost_gold = 9;  /** 找回的机缘单机 */
	int32 found_time = 10;  /** 可找回装备的最大时间 */
}

message PlayerGlobalConfigFightMode {
	int32 all_mode_require_rank = 1;  /** 切换模式所需等级 */
	float all_mode_to_peace_mode_need_seconds = 2;  /** `全体模式`切换到`和平模式`所需未攻击时长(单位：秒) */
	float mode_change_need_seconds = 3;  /** 战斗模式切换冷却时长(单位：秒) */
	float hate_sustain_seconds = 4;  /** 仇恨持续时长(单位：秒) */
	int32 world_speed_unlock_rank = 5;	  /** 倍速功能解锁等级 */
}

message PlayerGlobalConfigInventory {	
	int32 init_space = 1;  /** 初始背包空间 */
	int32 stage_up_add_space = 2;  /** 境界等级提升后扩容背包空间 */
	int32 full_mail_id = 3;  /** 背包已满默认发邮件ID */
}

message PlayerGlobalConfig {
	PlayerGlobalConfigConstants constants = 1;
	PlayerGlobalConfigRoleInitAttributes new_role_init_attrs = 2;
	PlayerGlobalConfigAbility ability = 3;
	PlayerGlobalConfigBreathingExercise breathing_exercise = 4;
	PlayerGlobalConfigThunderTest thunder_test = 5;
	PlayerGlobalConfigAlchemy alchemy = 6;
	PlayerGlobalConfigForge forge = 7;
	PlayerGlobalConfigFightMode fight_mode = 8;
	PlayerGlobalConfigInventory inventory = 9;
}

// ============================================================================


message NpcGlobalConfigConstants {
	float auto_move_stop_time = 1;
	float auto_move_walk_time = 2;
	int32 walk_speed = 3;
	float attack_interval_time = 4;
	float npc_lock_distance_auto = 5;  /** 自动锁定距离S2 */
	float npc_lock_distance_max = 6;  /** 锁定距离上限S3 */
	float monster_location_correction_distance_near = 7;  /** 怪物坐标补正距离 近 */
	float monster_location_correction_distance_far = 8;  /** 怪物坐标补正距离 远 */
	float monster_correction_cost_speed = 9;  /** 怪物补正速度 */
	float phy_default_ability_fullid = 10;  /** 体修默认技能 */
	float mag_default_ability_fullid = 11;  /** 法修默认技能 */
	int32 default_ability_weight = 12;  /** 默认技能权重 */
}


message NpcGlobalConfig {
	NpcGlobalConfigConstants constants = 1;
}

// ============================================================================

message WorldGlobalConfigDungeonCommon {
	float begin_delay_seconds = 1;  // 战斗开始延迟(秒)
	float end_delay_seconds = 2;  // 战斗结束延迟(秒)
}

message WorldGlobalConfig {
	WorldGlobalConfigDungeonCommon dungeon_common = 1;
}

// ============================================================================


// ============================================================================

message AppearanceGlobalConfigShopRefreshRule {
	int32 type = 1;
	repeated int32 num = 2;
	repeated int32 weight = 3;
}

message AppearanceGlobalConfigModelTypeInfo {
	int32 model_type = 1;
	string name_english = 2;
	string name_chinese = 3;
}

message AppearanceGlobalConfig {
	int32 refund_item_id = 1;
	int32 shop_item_id = 2;
	int32 shop_refresh_time = 3;
	int32 sk_type_change_cd = 4;
	int32 sk_type_change_item_id = 5;
	repeated AppearanceGlobalConfigShopRefreshRule shop_refresh_rule = 6;
	repeated AppearanceGlobalConfigModelTypeInfo model_type_info = 7;
}

// ============================================================================

// ============================================================================

message FarmGlobalConfig {
	string farmland_shape = 1;
	repeated int32 default_unlock_farmland_index = 2;
	int32 unlock_farmland_cost_item_id = 3;
	repeated int32 unlock_farmland_cost_item_num = 4;
	string farmland_seed_shape = 5;
	int32 watering_times_per_day = 6;
	repeated int32 cost_per_watering = 7;
	int32 add_speed_per_watering = 8;
	string add_speed_from_item = 9;
	float min_seed_plant_time_percent = 10;
}

// ============================================================================

// ============================================================================

message FriendsGlobalConfig {
	int32 max_friend_num = 1;
	int32 daily_search_count = 2;
	int32 max_apply_count = 3;
	int32 max_block_list = 4;
}

// ============================================================================


// ============================================================================

message AvatarStageCountDiff {
	int32 diff_num = 1;
	float coef = 2;
}

message AnotherMeGlobalConfig {
	int32 temp_package_max = 1;
	int32 idle_time_max = 2;
	int32 idle_time_duration = 3;
	int32 default_draw_time = 4;
	repeated AvatarStageCountDiff stage_count_diff = 5;
}

// ============================================================================

// ============================================================================

message FuZeRewardNum {
	int32 rank = 1;
	int32 num = 2;
}

message FuZeRewardItemId {
	int32 degree = 1;
	int32 item_id = 2;
}

message FuZeGlobalConfig {
	repeated FuZeRewardNum reward_num = 1;
	repeated FuZeRewardItemId reward_id = 2;
	int32 fuze_rank_num = 3;
	float fuze_rank_ratio = 4;
	float fenqi_exp_ratio = 5;
	int32 fuze_rank_min = 6;
}

// ============================================================================